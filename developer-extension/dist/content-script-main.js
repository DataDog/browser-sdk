(()=>{"use strict";class e{listeners=new Set;subscribe(e){return this.listeners.add(e),{unsubscribe:()=>{this.listeners.delete(e)}}}notify(e){this.listeners.forEach(t=>t(e))}}const t="http://localhost:8080",n=`${t}/datadog-logs.js`,r=`${t}/datadog-rum-slim.js`,i=`${t}/datadog-rum.js`;function o(e,t){!function(e){const t=new XMLHttpRequest;try{t.open("GET",e,!1),t.send()}catch(t){return void console.error(`[DD Browser SDK extension] Error while loading ${e}:`,t)}if(200===t.status){let n=t.responseText;n=n.replace('if (!scriptUrl) throw new Error("Automatic publicPath is not supported in this browser");',`if (!scriptUrl) scriptUrl = ${JSON.stringify(e)};`);const r=document.createElement("script");r.type="text/javascript",r.text=n,document.documentElement.prepend(r)}}(e);const n=t.get();n&&(t.onSet(e=>{return t=e,r=n,void Object.assign(t,r);var t,r}),t.returnValue(n))}function s(e){e.onSet(e=>{"_setDebug"in e&&e._setDebug(!0)})}function c(e,t){e.onSet(e=>{if("init"in e){const n=e.init;e.init=e=>{n({...e,...t,allowedTrackingOrigins:[location.origin]})}}})}function d(t){const n=new e;let r,i;return Object.defineProperty(window,t,{set(e){n.notify(e),i=e},get:()=>r??i}),{get:()=>window[t],onSet:e=>{n.subscribe(e)},returnValue:e=>{r=e}}}!function(){if(window.__ddBrowserSdkExtensionCallback)return;window.__ddBrowserSdkExtensionCallback=e=>{window.dispatchEvent(new CustomEvent("__ddBrowserSdkMessage",{detail:e}))};const e=function(){try{const e=sessionStorage.getItem("__ddBrowserSdkExtensionSettings");return JSON.parse(e||"null")}catch(e){console.error("Error getting settings",e)}}();if(e&&!window.DD_RUM&&!window.DD_LOGS){const t=d("DD_RUM"),u=d("DD_LOGS");e.debugMode&&(s(t),s(u)),e.rumConfigurationOverride&&c(t,e.rumConfigurationOverride),e.logsConfigurationOverride&&c(u,e.logsConfigurationOverride),"npm"===e.useDevBundles&&(o(e.useRumSlim?r:i,t),o(n,u))}}()})();