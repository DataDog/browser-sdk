<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Sandbox</title>
    <script src="http://localhost:8080/datadog-rum.js"></script>
    <script src="http://localhost:8080/datadog-logs.js"></script>
    <script>
      DD_RUM.init({
        clientToken: 'xxx',
        applicationId: 'xxx',
        sessionReplaySampleRate: 100,
        trackResources: true,
        trackLongTasks: true,
        telemetrySampleRate: 100,
        telemetryConfigurationSampleRate: 100,
        enableExperimentalFeatures: [],
      })
      const meter = DD_RUM.meterProvider.getMeter('default')
      function createCounter() {
        const name = `rum.iw.${counterName.value}`
        const counter = meter.createCounter(name)
        setInterval(() => counter.add(1), 60000 / frequency.value)
        const newCounter = document.createElement('li')
        newCounter.textContent = `counter: ${name}, frequency: ${frequency.value} occurrences per minute`
        activeCounters.appendChild(newCounter)

        counterName.value = null
        frequency.value = null
        counterName.focus()
      }
    </script>
  </head>
  <body>
    <fieldset>
      <legend>Create new counter</legend>
      <label>
        Name
        <input id="counterName" type="text" placeholder="counter name" autofocus />
      </label>
      <label>
        Frequency (occurrences by minute)
        <input id="frequency" type="number" placeholder="100" />
      </label>
      <button onclick="createCounter()">Create counter</button>
    </fieldset>
    <p>Active Counters:</p>
    <ul id="activeCounters"></ul>
  </body>
</html>
