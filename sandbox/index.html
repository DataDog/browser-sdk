<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Sandbox</title>
    <script src="http://localhost:8080/datadog-rum.js"></script>
    <script src="http://localhost:8080/datadog-logs.js"></script>
    <script>
      DD_RUM.init({
        clientToken: 'xxx',
        applicationId: 'xxx',
        sessionReplaySampleRate: 100,
        trackResources: true,
        trackLongTasks: true,
        telemetrySampleRate: 100,
        telemetryConfigurationSampleRate: 100,
        telemetryUsageSampleRate: 100,
        enableExperimentalFeatures: [],
      })
      DD_LOGS.init({
        clientToken: 'xxx',
        telemetrySampleRate: 100,
        telemetryConfigurationSampleRate: 100,
        telemetryUsageSampleRate: 100,
        enableExperimentalFeatures: [],
      })
    </script>
    <script>
      const RealXMLHttpRequest = window.XMLHttpRequest
      window.XMLHttpRequest = function () {
        const xhr = new RealXMLHttpRequest()
        const realOpen = xhr.open
        xhr.open = function () {
          realOpen.apply(xhr, arguments)
        }
        return xhr
      }
    </script>
    <script>
      const xhr = new XMLHttpRequest()
      xhr.open('GET', '/')
      xhr.send()
      xhr.onreadystatechange = function () {
        if (xhr.readyState === 4 && xhr.status === 200) {
          console.log('request sent')
        }
      }
    </script>
  </head>
  <body></body>
</html>
